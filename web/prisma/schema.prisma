// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Income {
  id          Int      @id @default(autoincrement())
  amount      Float
  date        DateTime // The date of income
  description String?
  createdAt   DateTime @default(now())
}

model Budget {
  id             Int    @id @default(autoincrement())
  month          String @unique // Format: "YYYY-MM"
  fixedBudget    Float  @default(0)
  flexibleBudget Float  @default(0)
}

model Expense {
  id          Int      @id @default(autoincrement())
  amount      Float
  date        DateTime // The date of expense
  description String?
  categoryL1  String   // Survival, Social, Enjoyment, Development
  categoryL2  String   // Fixed, Flexible
  createdAt   DateTime @default(now())
}

model Asset {
  id        Int      @id @default(autoincrement())
  name      String
  amount    Float
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  history   AssetHistory[]
}

model AssetHistory {
  id        Int      @id @default(autoincrement())
  amount    Float
  date      DateTime @default(now())
  assetId   Int
  asset     Asset    @relation(fields: [assetId], references: [id], onDelete: Cascade)
}

model Liability {
  id           Int      @id @default(autoincrement())
  name         String
  amount       Float
  interestRate Float    @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  history      LiabilityHistory[]
}

model LiabilityHistory {
  id          Int       @id @default(autoincrement())
  amount      Float
  date        DateTime  @default(now())
  liabilityId Int
  liability   Liability @relation(fields: [liabilityId], references: [id], onDelete: Cascade)
}
